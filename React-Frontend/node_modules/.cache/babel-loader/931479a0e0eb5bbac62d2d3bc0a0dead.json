{"ast":null,"code":"var _jsxFileName = \"/home/ec2-user/environment/React-Frontend/src/pages/login.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport './login.css';\nimport API from '../components/api';\n\nclass Login extends Component {\n  constructor() {\n    super();\n\n    this.onChange = e => {\n      const state = this.state;\n      state[e.target.name] = e.target.value;\n      this.setState(state);\n    };\n\n    this.onSubmit = e => {\n      e.preventDefault();\n      const _this$state = this.state,\n            email = _this$state.email,\n            password = _this$state.password,\n            type = _this$state.type;\n      axios.post(API + '/api/auth/login', {\n        email,\n        password,\n        type\n      }).then(result => {\n        console.log(result.data.token);\n\n        if (result.data.success === true) {\n          localStorage.setItem('jwtToken', result.data.token);\n          localStorage.setItem('type', result.data.type);\n          this.setState({\n            message: ''\n          });\n          if (result.data.type === \"PM\") this.props.history.push('/PM');else this.props.history.push('/TST');\n        } else {\n          this.setState({\n            message: 'Login failed. Username or password not match'\n          });\n        }\n      }).catch(error => {\n        if (error.response.status === 401) {\n          this.setState({\n            message: 'Login failed. Username or password not match'\n          });\n        }\n      });\n    };\n\n    this.state = {\n      email: '',\n      password: '',\n      message: '',\n      type: ''\n    };\n    this.handleDropdownChange = this.handleDropdownChange.bind(this);\n  }\n\n  handleDropdownChange(e) {\n    this.setState({\n      type: e.target.value\n    });\n  }\n\n  render() {\n    const _this$state2 = this.state,\n          email = _this$state2.email,\n          password = _this$state2.password,\n          message = _this$state2.message;\n    return React.createElement(\"div\", {\n      class: \"login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, \"Login\"), React.createElement(\"form\", {\n      onSubmit: this.onSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, message !== '' && React.createElement(\"div\", {\n      class: \"alert alert-warning alert-dismissible\",\n      role: \"alert\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, message), React.createElement(\"input\", {\n      type: \"text\",\n      name: \"email\",\n      placeholder: \"email\",\n      value: email,\n      onChange: this.onChange,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"password\",\n      name: \"password\",\n      placeholder: \"Password\",\n      value: password,\n      onChange: this.onChange,\n      required: \"required\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      class: \"select\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(\"select\", {\n      onChange: this.handleDropdownChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, \"Account Type\"), React.createElement(\"option\", {\n      value: \"PM\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, \"Project Team\"), React.createElement(\"option\", {\n      value: \"TST\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, \"Tester\"))), React.createElement(\"button\", {\n      type: \"submit\",\n      class: \"btn btn-primary btn-block btn-large\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, \"Let me in.\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, \"Not a member? \", React.createElement(Link, {\n      to: \"/register\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      class: \"glyphicon glyphicon-plus-sign\",\n      \"aria-hidden\": \"true\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }), \" Register here\"))));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["/home/ec2-user/environment/React-Frontend/src/pages/login.js"],"names":["React","Component","axios","Link","API","Login","constructor","onChange","e","state","target","name","value","setState","onSubmit","preventDefault","email","password","type","post","then","result","console","log","data","token","success","localStorage","setItem","message","props","history","push","catch","error","response","status","handleDropdownChange","bind","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\nimport './login.css';\r\nimport API from '../components/api'\r\n\r\nclass Login extends Component {\r\n\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      email: '',\r\n      password: '',\r\n      message: '',\r\n      type: ''\r\n    };\r\n    this.handleDropdownChange = this.handleDropdownChange.bind(this);\r\n\r\n  }\r\n\r\n  handleDropdownChange(e) {\r\n    this.setState({ type: e.target.value });\r\n  }\r\n\r\n  onChange = (e) => {\r\n    const state = this.state\r\n    state[e.target.name] = e.target.value;\r\n    this.setState(state);\r\n  }\r\n\r\n  onSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    const { email, password,type } = this.state;\r\n\r\n    axios.post(API+'/api/auth/login', { email, password,type })\r\n      .then((result) => {\r\n        console.log(result.data.token)\r\n        if(result.data.success === true){\r\n          localStorage.setItem('jwtToken', result.data.token);\r\n          localStorage.setItem('type', result.data.type);\r\n          this.setState({ message: '' });\r\n          if(result.data.type === \"PM\")\r\n          this.props.history.push('/PM')\r\n          else\r\n          this.props.history.push('/TST')\r\n        }else{\r\n          this.setState({ message: 'Login failed. Username or password not match' });\r\n\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        if(error.response.status === 401) {\r\n          this.setState({ message: 'Login failed. Username or password not match' });\r\n        }\r\n      });\r\n  }\r\n\r\n  render() {\r\n    const { email, password, message } = this.state;\r\n    return (\r\n      <div class=\"login\">\r\n      <h1>Login</h1>\r\n      <form onSubmit={this.onSubmit}>\r\n        {message !== '' &&\r\n            <div class=\"alert alert-warning alert-dismissible\" role=\"alert\">\r\n              { message }\r\n            </div>\r\n          }\r\n        <input type=\"text\" name=\"email\" placeholder=\"email\" value={email} onChange={this.onChange} required />\r\n        <input type=\"password\" name=\"password\" placeholder=\"Password\" value={password} onChange={this.onChange} required=\"required\" />\r\n        <div class=\"select\">\r\n            <select onChange={this.handleDropdownChange}>\r\n              <option value=\"\">Account Type</option>\r\n              <option value=\"PM\">Project Team</option>\r\n              <option value=\"TST\">Tester</option>\r\n            </select>\r\n          </div>\r\n        <button type=\"submit\" class=\"btn btn-primary btn-block btn-large\">Let me in.</button>\r\n        <p>\r\n            Not a member? <Link to=\"/register\"><span class=\"glyphicon glyphicon-plus-sign\" aria-hidden=\"true\"></span> Register here</Link>\r\n        </p>\r\n    </form>\r\n    </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}